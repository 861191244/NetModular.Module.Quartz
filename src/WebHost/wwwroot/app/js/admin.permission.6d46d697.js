(window.webpackJsonp=window.webpackJsonp||[]).push([["admin.permission"],{"8a23":function(e,l,t){"use strict";t.r(l);var o=t("9b0f"),n=[{name:"id",label:"编号",show:!1,width:260},{name:"name",label:"名称"},{name:"moduleName",label:"所属模块"},{name:"moduleCode",label:"模块编码",show:!1},{name:"controller",label:"控制器"},{name:"action",label:"方法"},{name:"httpMethodName",label:"请求方法"},{name:"code",label:"唯一编码",width:"300"},{name:"creator",label:"创建人",width:100,show:!1},{name:"createdTime",label:"创建时间",width:150,show:!1}],a=t("c17f"),r=$api.admin.permission,i=$api.admin.system,s={name:o.default.name,components:{ModuleInfoSelect:a.a},data:function(){return{list:{title:o.default.title,cols:n,labelWidth:"70px",noOperation:!0,action:r.query,advanced:{enabled:!0,width:"400px"},model:{moduleCode:"",name:"",controller:"",action:""},loading:!1},buttons:o.default.buttons}},methods:{refresh:function(){this.$refs.list.refresh()},sync:function(){var l=this;this._confirm("您确认要同步权限信息吗","同步权限信息").then(function(){l.list.loading=!0,r.sync().then(function(e){l.list.loading=!1,l._success("同步成功"),l.refresh()})})},getAllControllerAction:function(){return i.getAllController({module:this.list.model.moduleCode})},getAllAction:function(){var e=this.list.model;return i.getAllAction({module:e.moduleCode,controller:e.controller})},onModuleChange:function(){this.$refs.controllerSelect.refresh()},onControllerChange:function(){this.$refs.actionSelect.refresh()}}},c=t("2877"),u=Object(c.a)(s,function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("nm-container",[o("nm-list",t._b({ref:"list",scopedSlots:t._u([{key:"querybar",fn:function(){return[o("el-form-item",{attrs:{label:"名称：",prop:"name"}},[o("el-input",{attrs:{clearable:""},model:{value:t.list.model.name,callback:function(e){t.$set(t.list.model,"name",e)},expression:"list.model.name"}})],1)]},proxy:!0},{key:"querybar-advanced",fn:function(){return[o("el-row",[o("el-col",{attrs:{span:20,offset:1}},[o("el-form-item",{attrs:{label:"模块：",prop:"moduleCode"}},[o("module-info-select",{on:{change:t.onModuleChange},model:{value:t.list.model.moduleCode,callback:function(e){t.$set(t.list.model,"moduleCode",e)},expression:"list.model.moduleCode"}})],1),o("el-form-item",{attrs:{label:"控制器：",prop:"controller"}},[o("nm-select",{ref:"controllerSelect",attrs:{method:t.getAllControllerAction},on:{change:t.onControllerChange},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.options;return t._l(l,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[o("span",[t._v(t._s(e.label)+"("+t._s(e.value)+")")])])})}}]),model:{value:t.list.model.controller,callback:function(e){t.$set(t.list.model,"controller",e)},expression:"list.model.controller"}})],1),o("el-form-item",{attrs:{label:"方法：",prop:"action"}},[o("nm-select",{ref:"actionSelect",attrs:{method:t.getAllAction},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.options;return t._l(l,function(e){return o("el-option",{key:e.value,attrs:{label:e.label,value:e.value}},[o("span",[t._v(t._s(e.label)+"("+t._s(e.value)+")")])])})}}]),model:{value:t.list.model.action,callback:function(e){t.$set(t.list.model,"action",e)},expression:"list.model.action"}})],1)],1)],1)]},proxy:!0},{key:"querybar-buttons",fn:function(){return[o("nm-button-has",{attrs:{options:t.buttons.sync},on:{click:t.sync}})]},proxy:!0},{key:"col-moduleName",fn:function(e){var l=e.row;return[o("span",[t._v(t._s(l.moduleName+"("+l.moduleCode+")"))])]}}])},"nm-list",t.list,!1))],1)},[],!1,null,null,null);l.default=u.exports},c17f:function(e,l,t){"use strict";var o={mixins:[t("3ee3").b.select],data:function(){return{action:$api.admin.moduleInfo.select}}},n=t("2877"),a=Object(n.a)(o,void 0,void 0,!1,null,null,null);l.a=a.exports}}]);